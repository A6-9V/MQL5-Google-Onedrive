version: '3.8'

services:
  # Light version (Python only)
  mql5-automation:
    build:
      context: .
      dockerfile: Dockerfile
    image: mouyleng/mql5-trading-automation:latest
    container_name: mql5-trading-automation
    restart: always
    volumes:
      - ./config:/app/config
      - ./logs:/app/logs
      - ./mt5:/app/mt5
    environment:
      - PYTHONUNBUFFERED=1
      - TZ=UTC
    networks:
      - mql5-network

  # Full version (MT5 + Wine + Python)
  # Use: docker-compose up mql5-ea-full
  mql5-ea-full:
    build:
      context: .
      dockerfile: Dockerfile.mt5
    image: mouyleng/mql5-ea-container:latest
    container_name: mql5-ea-full
    restart: always
    environment:
      - TZ=UTC
      - DISPLAY=:99
    volumes:
      - ./config:/app/config
      - ./logs:/app/logs
      - ./mt5:/app/mt5
    networks:
      - mql5-network

networks:
  mql5-network:
    driver: bridge
